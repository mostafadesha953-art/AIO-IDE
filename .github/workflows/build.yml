name: AIO_IDE_Windows_Production

on: [push]

jobs:
  build-windows:
    runs-on: windows-latest # التركيز فقط على بيئة ويندوز لضمان النجاح

    steps:
    - uses: actions/checkout@v4

    - name: Install vcpkg Dependencies
      # تثبيت المكتبات الضرورية فقط لنسخة الويندوز
      run: |
        vcpkg install curl:x64-windows nlohmann-json:x64-windows

    - name: Configure CMake
      run: |
        cmake -S . -B build `
        -DCMAKE_TOOLCHAIN_FILE="$env:VCPKG_INSTALLATION_ROOT/scripts/buildsystems/vcpkg.cmake" `
        -DCMAKE_BUILD_TYPE=Release `
        -A x64

    - name: Build Project
      run: cmake --build build --config Release

    - name: Upload Final EXE
      uses: actions/upload-artifact@v4
      with:
        name: AIO_Smart_IDE_Windows
        path: build/Release/AIO_IDE.exe
